"use strict";var n=require("jotai/utils"),t=require("react"),e=require("jotai"),i=require("@daily-co/daily-js");function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}var o=function(){return o=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},o.apply(this,arguments)};function u(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e}function a(n,t,e,i){return new(e||(e=Promise))(function(r,o){function u(n){try{c(i.next(n))}catch(n){o(n)}}function a(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e(function(n){n(t)})).then(u,a)}c((i=i.apply(n,t||[])).next())})}function c(n,t){var e,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(u=0)),u;)try{if(e=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,i=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((r=(r=u.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){u.label=a[1];break}if(6===a[0]&&u.label<r[1]){u.label=r[1],r=a;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(a);break}r[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(n,u)}catch(n){a=[6,n],i=0}finally{e=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function l(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,r,o=e.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)u.push(i.value)}catch(n){r={error:n}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return u}function f(n,t,e){if(e||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var s=t.createContext(null),v=function(){var n=t.useContext(s);return t.useDebugValue(n),n},p=t.createContext({on:function(){},off:function(){}}),g=-1,m=function(){return g--},y=1,b=function(){return y++},h=function(n,e,i){void 0===i&&(i=!1);var r=t.useContext(p),o=r.off,u=r.on,a=d(t.useState(!1),2),c=a[0],l=a[1],f=t.useRef(0),s=t.useMemo(function(){return i?m():b()},[i]);t.useEffect(function(){if(n&&!c){if(f.current>1e5)return console.error("useDailyEvent called with potentially non-memoized event callback or due to too many re-renders.\n        Memoize using useCallback to avoid re-render loop or reduce the amount of state transitions the callback depends on.\n        Passed callback for '".concat(n,"' event is NOT registered."),e),void l(!0);f.current++;var t=setTimeout(function(){f.current=0},50);return u(n,e,s),function(){clearTimeout(t),o(n,s)}}},[e,n,s,c,o,u]),t.useDebugValue({event:n,eventId:s,isBlocked:c,callback:e})};function w(n,t){var e,i;if(n===t)return!0;if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;for(var o=0;o<n.length;o++)if(!w(n[o],t[o]))return!1;return!0}if(MediaStream&&n instanceof MediaStream&&t instanceof MediaStream)return n.id===t.id&&n.active===t.active&&n.getTracks().length===t.getTracks().length&&n.getTracks().every(function(n,e){return w(n,t.getTracks()[e])});if(MediaStreamTrack&&n instanceof MediaStreamTrack&&t instanceof MediaStreamTrack)return n.id===t.id&&n.kind===t.kind&&n.readyState===t.readyState;if(n instanceof Date&&t instanceof Date)return n.getTime()===t.getTime();if(n instanceof RegExp&&t instanceof RegExp)return n.source===t.source&&n.flags===t.flags;if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;var u=Array.from(n).sort(),a=Array.from(t).sort();return u.every(function(n,t){return w(n,a[t])})}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;try{for(var c=l(n.entries()),f=c.next();!f.done;f=c.next()){var s=d(f.value,2),v=s[0],p=s[1];if(!t.has(v)||!w(p,t.get(v)))return!1}}catch(n){e={error:n}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(e)throw e.error}}return!0}if("object"!==r(n)||null===n||"object"!==r(t)||null===t)return!1;var g=Object.keys(n),m=Object.keys(t);if(g.length!==m.length)return!1;for(o=0;o<g.length;o++)if(v=g[o],!Object.prototype.hasOwnProperty.call(t,v)||!w(n[v],t[v]))return!1;return!0}function S(n,t){if(n===t)return!0;if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++){var i=n[e],o=t[e],u=null!==i&&"object"===r(i),a=null!==o&&"object"===r(o);if(u||a){if(!w(i,o))return!1}else if(i!==o)return!1}return!0}function k(n){return"daily-react-"+n}function A(n){var t=new Map,i=new Map;return function(r){if(!t.has(r)){var o=e.atom(function(t){var e=n.get(r)(t),o=i.get(r);return null!=o&&n.equals(e,o)?o:(i.set(r,e),e)});t.set(r,o)}return t.get(r)}}var j,x,M="::",I=function(n,t){return n+M+t},O=function(n,t){return D(I(n,t))},R=n.atomFamily(function(n){var t=e.atom([]);return t.debugLabel=k("participant-property-paths-".concat(n)),t}),D=n.atomFamily(function(n){var t=e.atom(null);return t.debugLabel=k("participant-property-".concat(n)),t}),T=A({equals:S,get:function(n){return function(t){var e=d(n.split(M),2),i=e[0];return e[1].split(";").map(function(n){return t(O(i,n))})}}}),P=function(n,i){var r,o=e.useAtomValue(Array.isArray(i)?T(function(n,t){return n+M+t.join(";")}(n,i)):D(I(n,i)));return t.useDebugValue(Array.isArray(i)?i.reduce(function(n,t,e){return n[t]=o[e],n},{}):((r={})[i]=o,r)),o},F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function L(n){return n&&n.t&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var q=L(function(){if(x)return j;x=1;var n="Expected a function",t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt,a="object"==r(F)&&F&&F.Object===Object&&F,c="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,l=a||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,s=Math.min,v=function(){return l.Date.now()};function p(n){var t=r(n);return!!n&&("object"==t||"function"==t)}function g(n){if("number"==typeof n)return n;if(function(n){return"symbol"==r(n)||function(n){return!!n&&"object"==r(n)}(n)&&"[object Symbol]"==d.call(n)}(n))return NaN;if(p(n)){var a="function"==typeof n.valueOf?n.valueOf():n;n=p(a)?a+"":a}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var c=i.test(n);return c||o.test(n)?u(n.slice(2),c?2:8):e.test(n)?NaN:+n}return j=function(t,e,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return p(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),function(t,e,i){var r,o,u,a,c,l,d=0,m=!1,y=!1,b=!0;if("function"!=typeof t)throw new TypeError(n);function h(n){var e=r,i=o;return r=o=void 0,d=n,a=t.apply(i,e)}function w(n){var t=n-l;return void 0===l||t>=e||t<0||y&&n-d>=u}function S(){var n=v();if(w(n))return k(n);c=setTimeout(S,function(n){var t=e-(n-l);return y?s(t,u-(n-d)):t}(n))}function k(n){return c=void 0,b&&r?h(n):(r=o=void 0,a)}function A(){var n=v(),t=w(n);if(r=arguments,o=this,l=n,t){if(void 0===c)return function(n){return d=n,c=setTimeout(S,e),m?h(n):a}(l);if(y)return c=setTimeout(S,e),h(l)}return void 0===c&&(c=setTimeout(S,e)),a}return e=g(e)||0,p(i)&&(m=!!i.leading,u=(y="maxWait"in i)?f(g(i.maxWait)||0,e):u,b="trailing"in i?!!i.trailing:b),A.cancel=function(){void 0!==c&&clearTimeout(c),d=0,r=l=o=c=void 0},A.flush=function(){return void 0===c?a:k(v())},A}(t,e,{leading:r,maxWait:e,trailing:o})}}()),E=function(n,e,i,r){void 0===i&&(i=500),void 0===r&&(r=!1);var o=t.useContext(p),u=o.off,a=o.on,c=t.useMemo(function(){var t;return Array.isArray(n)?n.reduce(function(n,t){return n[t]=r?m():b(),n},{}):((t={})[n]=r?m():b(),t)},[n,r]),l=t.useRef([]);h("call-instance-destroyed",t.useCallback(function(){l.current.length=0},[]));var d=t.useMemo(function(){return q(function(){0!==l.current.length&&(e(l.current),l.current.length=0)},i,{trailing:!0})},[e,i]);t.useEffect(function(){if(n){var t=function(n){l.current.push(n),d()};return Array.isArray(n)?n.forEach(function(n){return a(n,t,c[n])}):a(n,t,c[n]),function(){Array.isArray(n)?n.forEach(function(n){return u(n,c[n])}):u(n,c[n])}}},[d,n,c,u,a]),t.useDebugValue({event:n,eventId:c})},C=function(n,t,e){if(void 0===t&&(t=""),void 0===e&&(e=new Set),"object"!==r(n)||null===n||e.has(n))return[t];e.add(n);var i=[];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var u=t?"".concat(t,".").concat(o):o;i.push.apply(i,f([u],d(C(n[o],u,e)),!1))}return e.delete(n),i},B=function(n){return C(n)},V=function(n,t){return t.map(function(t){return function(n,t){return(t+"").split(".").filter(function(n){return n.length}).reduce(function(n,t){return n&&n[t]},n)}(n,t)})},_=e.atom(null);_.debugLabel=k("active-id");var W=e.atom("");W.debugLabel=k("local-id");var N=e.atom(null);N.debugLabel=k("local-join-date");var z=e.atom([]);z.debugLabel=k("participant-ids");var $=n.atomFamily(function(n){var t=e.atom(null);return t.debugLabel=k("participant-".concat(n)),t}),G=e.atom([]);G.debugLabel=k("waiting-participants");var U=n.atomFamily(function(n){var t=e.atom({awaitingAccess:{level:"full"},id:n,name:""});return t.debugLabel=k("waiting-participant-".concat(n)),t}),H=A({equals:S,get:function(){return function(n){return n(G).map(function(t){return n(U(t))})}}}),J=function(e){var i=e.children,r=v(),u=d(t.useState(!1),2),a=u[0],c=u[1],l=n.useAtomCallback(t.useCallback(function(n,t,e){t(W,e.local.session_id);var i=Object.values(e),r=i.map(function(n){return n.session_id});t(z,r),i.forEach(function(n){t($(n.session_id),n);var e=B(n);t(R(n.session_id),e),e.forEach(function(e){var i=d(V(n,[e]),1)[0];t(O(n.session_id,e),i)})}),c(!0)},[]));t.useEffect(function(){if(r&&!a){var n=setInterval(function(){var t=r.participants();"local"in t&&(l(t),clearInterval(n))},100);return function(){clearInterval(n)}}},[r,a,l]);var s=t.useCallback(function(){if(r){var n=null==r?void 0:r.participants();n.local&&l(n)}},[r,l]);h("started-camera",s,!0),h("access-state-updated",s,!0),h("joining-meeting",n.useAtomCallback(t.useCallback(function(n,t){t(N,new Date),s()},[s])),!0),h("joined-meeting",t.useCallback(function(n){l(n.participants)},[l]),!0);var p=n.useAtomCallback(t.useCallback(function(n,t){t(W,""),t(_,null),n(z).forEach(function(n){return $.remove(n)}),t(z,[])},[]));return h("call-instance-destroyed",p,!0),h("left-meeting",p,!0),E(["active-speaker-change","participant-joined","participant-updated","participant-left"],n.useAtomCallback(t.useCallback(function(n,t,e){e.length&&e.forEach(function(e){switch(e.action){case"active-speaker-change":t(_,e.activeSpeaker.peerId),t($(e.activeSpeaker.peerId),function(n){return n?o(o({},n),{last_active:new Date}):null});break;case"participant-joined":t(z,function(n){return n.includes(e.participant.session_id)?n:f(f([],d(n),!1),[e.participant.session_id],!1)}),t($(e.participant.session_id),e.participant);var i=B(e.participant);t(R(e.participant.session_id),i),i.forEach(function(n){var i=d(V(e.participant,[n]),1)[0];t(O(e.participant.session_id,n),i)});break;case"participant-updated":t($(e.participant.session_id),e.participant),e.participant.local&&t(W,e.participant.session_id),i=B(e.participant);var r=n(R(e.participant.session_id));(i.length!==r.length||i.some(function(n){return!r.includes(n)}))&&t(R(e.participant.session_id),i);var u=new Set(r),a=V(e.participant,i);i.forEach(function(n,i){var r=a[i];u.delete(n),t(O(e.participant.session_id,n),function(n){return w(n,r)?n:r})}),u.forEach(function(n){t(O(e.participant.session_id,n),null)});break;case"participant-left":t(z,function(n){return n.includes(e.participant.session_id)?n.filter(function(n){return n!==e.participant.session_id}):n}),$.remove(e.participant.session_id),n(R(e.participant.session_id)).forEach(function(n){D.remove(I(e.participant.session_id,n))}),R.remove(e.participant.session_id)}})},[])),100,!0),E(["waiting-participant-added","waiting-participant-updated","waiting-participant-removed"],n.useAtomCallback(t.useCallback(function(n,t,e){e.forEach(function(n){switch(n.action){case"waiting-participant-added":t(G,function(t){return t.includes(n.participant.id)?t:f(f([],d(t),!1),[n.participant.id],!1)}),t(U(n.participant.id),n.participant);break;case"waiting-participant-updated":t(U(n.participant.id),n.participant);break;case"waiting-participant-removed":t(G,function(t){return t.filter(function(t){return t!==n.participant.id})}),U.remove(n.participant.id)}})},[])),100,!0),t.createElement(t.Fragment,null,i)},K=function(){var n=e.useAtomValue(W);return t.useDebugValue(n),n},Q=function(){return!0},X=function(n){var i=void 0===n?{}:n,r=i.filter,o=void 0===r?Q:r,u=i.ignoreLocal,a=void 0!==u&&u,c=K(),l=e.useAtomValue(_),f=a&&l===c,s=!(null==o?void 0:o(l)),v=!f&&!s,p=d(t.useState(v?l:null),2),g=p[0],m=p[1];return t.useEffect(function(){f||s||m(l)},[s,f,l]),t.useDebugValue(g),g},Y=function(n){return["blocked","off"].includes(n)},Z=function(n,t){return"".concat(n).concat(";").concat(t)},nn=A({equals:w,get:function(n){return function(t){var e=d(n.split(";"),2),i=e[0],r=e[1];return t(z).filter(function(n){switch(i){case"local":case"owner":case"record":return t(O(n,i));case"remote":return!t(O(n,"local"));case"screen":var e=t(O(n,"tracks.screenAudio.state")),r=t(O(n,"tracks.screenVideo.state"));return!Y(e)||!Y(r);default:return!0}}).sort(function(n,e){switch(r){case"joined_at":case"session_id":case"user_id":case"user_name":var i=t(O(n,r)),o=t(O(e,r));if(void 0!==i||void 0!==o){if(void 0===i)return-1;if(void 0===o)return 1;if(i>o)return 1;if(i<o)return-1}return 0;default:return 0}})}}}),tn=function(i){var r=void 0===i?{}:i,o=r.filter,u=r.onActiveSpeakerChange,a=r.onParticipantJoined,c=r.onParticipantLeft,l=r.onParticipantUpdated,f=r.sort,s=e.useAtomValue(nn(Z("string"==typeof o?o:null,"string"==typeof f?f:null))),v="function"==typeof o||"function"==typeof f,p=t.useCallback(function(n){return"function"!=typeof o&&"function"!=typeof f?[]:s.map(function(t){return n($(t))}).filter(function(n){return!!n}).filter("function"==typeof o?o:function(){return!0}).sort("function"==typeof f?f:function(){return 0}).map(function(n){return n.session_id}).filter(Boolean)},[o,s,f]),g=d(t.useState([]),2),m=g[0],y=g[1],b=n.useAtomCallback(t.useCallback(function(n){if(v){var t=p(n);w(t,m)||y(t)}},[m,p,v]));t.useEffect(function(){b()},[b]),E(["participant-joined","participant-updated","active-speaker-change","participant-left"],t.useCallback(function(n){n.length&&(n.forEach(function(n){switch(n.action){case"participant-joined":null==a||a(n);break;case"participant-updated":null==l||l(n);break;case"active-speaker-change":null==u||u(n);break;case"participant-left":null==c||c(n)}}),b())},[b,u,a,c,l]));var h="function"==typeof o||"function"==typeof f?m:s;return t.useDebugValue(h),h},en=A({equals:S,get:function(){return function(n){return n(nn(Z("screen",null))).map(function(t){return{local:n(O(t,"local")),screenAudio:n(O(t,"tracks.screenAudio")),screenVideo:n(O(t,"tracks.screenVideo")),screenId:"".concat(t,"-screen"),session_id:t}})}}}),rn=function(n){var i=void 0===n?{}:n,r=i.onError,o=i.onLocalScreenShareStarted,u=i.onLocalScreenShareStopped,a=v(),c=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];null==a||a.startScreenShare.apply(a,f([],d(n),!1))},[a]),l=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];null==a||a.stopScreenShare.apply(a,f([],d(n),!1))},[a]);h("local-screen-share-started",t.useCallback(function(){return null==o?void 0:o()},[o])),h("local-screen-share-stopped",t.useCallback(function(){return null==u?void 0:u()},[u])),h("nonfatal-error",t.useCallback(function(n){"screen-share-error"===n.type&&(null==r||r(n))},[r]));var s=e.useAtomValue(en(void 0)),p={isSharingScreen:s.some(function(n){return n.local}),screens:s,startScreenShare:c,stopScreenShare:l};return t.useDebugValue(p),p},on=function(n,e){void 0===e&&(e="video");var i=P(n,"tracks.".concat(e)),r=i?o(o({},i),{isOff:Y(i.state)}):{isOff:!0,persistentTrack:void 0,state:"off",subscribed:!1};return t.useDebugValue(r),r};function un(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.useCallback(function(t){for(var e=0;e<n.length;e++){var i=n[e];"function"==typeof i?i(t):i&&"object"===r(i)&&(i.current=t)}},n)}var an=t.memo(t.forwardRef(function(n,e){var i=n.onPlayFailed,r=n.sessionId,a=n.type,c=void 0===a?"audio":a,l=u(n,["onPlayFailed","sessionId","type"]),d=t.useRef(null),f=on(r,c),s=un(d,e),v=null==f?void 0:f.subscribed;return t.useEffect(function(){var n=d.current;if(n&&(null==f?void 0:f.persistentTrack)){var t=function(){n.play().catch(function(t){null==i||i({sessionId:r,target:n,type:c,message:t.message,name:t.name})})};return MediaStream?(n.addEventListener("canplay",t),n.srcObject=new MediaStream([null==f?void 0:f.persistentTrack]),function(){null==n||n.removeEventListener("canplay",t)}):(console.warn("MediaStream API not available. Can't setup ".concat(c," for ").concat(r)),void(null==i||i({sessionId:r,target:n,type:c,message:"MediaStream API not available",name:"MediaStream API not available"})))}},[null==f?void 0:f.persistentTrack,i,r,c]),h("participant-left",t.useCallback(function(n){var t=d.current;n.participant.session_id===r&&t&&(t.srcObject=null)},[r])),t.createElement("audio",o({autoPlay:!0,ref:s},l,{"data-session-id":r,"data-audio-type":c,"data-subscribed":v}))}));an.displayName="DailyAudioTrack";var cn=t.memo(t.forwardRef(function(e,i){var r=e.autoSubscribeActiveSpeaker,o=void 0!==r&&r,u=e.maxSpeakers,l=void 0===u?5:u,s=e.onPlayFailed,p=e.playLocalScreenAudio,g=void 0!==p&&p,m=v(),y=d(t.useState(Array(l).fill("")),2),b=y[0],h=y[1],w=rn().screens,S=K(),k=X({ignoreLocal:!0}),A=t.useRef(null);t.useImperativeHandle(i,function(){return{getActiveSpeakerAudio:function(){var n,t;return null!==(t=null===(n=A.current)||void 0===n?void 0:n.querySelector('audio[data-session-id="'.concat(k,'"][data-audio-type="audio"]')))&&void 0!==t?t:null},getAllAudio:function(){var n,t;return Array.from(null!==(t=null===(n=A.current)||void 0===n?void 0:n.querySelectorAll("audio"))&&void 0!==t?t:[])},getAudioBySessionId:function(n){var t,e;return null!==(e=null===(t=A.current)||void 0===t?void 0:t.querySelector('audio[data-session-id="'.concat(n,'"][data-audio-type="audio"]')))&&void 0!==e?e:null},getRmpAudio:function(){var n,t;return Array.from(null!==(t=null===(n=A.current)||void 0===n?void 0:n.querySelectorAll('audio[data-audio-type="rmpAudio"]'))&&void 0!==t?t:[])},getScreenAudio:function(){var n,t;return Array.from(null!==(t=null===(n=A.current)||void 0===n?void 0:n.querySelectorAll('audio[data-audio-type="screenAudio"]'))&&void 0!==t?t:[])},getRmpAudioBySessionId:function(n){var t,e;return null!==(e=null===(t=A.current)||void 0===t?void 0:t.querySelector('audio[data-session-id="'.concat(n,'"][data-audio-type="rmpAudio"]')))&&void 0!==e?e:null},getScreenAudioBySessionId:function(n){var t,e;return null!==(e=null===(t=A.current)||void 0===t?void 0:t.querySelector('audio[data-session-id="'.concat(n,'"][data-audio-type="screenAudio"]')))&&void 0!==e?e:null}}},[k]);var j=n.useAtomCallback(t.useCallback(function(n,t,e){return a(void 0,void 0,void 0,function(){var t,i,r;return c(this,function(u){if(t=Object.values(null!==(r=null==m?void 0:m.participants())&&void 0!==r?r:{}).filter(function(n){return!n.local&&!!n.tracks.audio.subscribed}),!(i=function(n){return t.some(function(t){return t.session_id===n})})(e)){if(!m||m.isDestroyed()||!o||m.subscribeToTracksAutomatically())return[2];m.updateParticipant(e,{setSubscribedTracks:{audio:!0}})}return h(function(r){var o;if(r.includes(e))return r;var u=function(n){return!n||!i(n)};if(r.some(u)){var a=r.findIndex(u);return r[a]=e,f([],d(r),!1)}var c=r.findIndex(function(n){return t.some(function(t){return t.session_id===n&&Y(t.tracks.audio.state)})});if(c>=0)return r[c]=e,f([],d(r),!1);var l=t.filter(function(n){return r.includes(n.session_id)&&n.session_id!==k}).sort(function(t,e){var i,r,o=null!==(i=n(O(t.session_id,"last_active")))&&void 0!==i?i:new Date("1970-01-01"),u=null!==(r=n(O(e.session_id,"last_active")))&&void 0!==r?r:new Date("1970-01-01");return o>u?1:o<u?-1:0});if(!l.length){var s=r.findIndex(function(n){return n!==k});return r[s]=e,f([],d(r),!1)}var v=r.indexOf(null===(o=l[0])||void 0===o?void 0:o.session_id);return r[v]=e,f([],d(r),!1)}),[2]})})},[k,o,m])),x=t.useCallback(function(n){h(function(t){if(!t.includes(n))return t;var e=f([],d(t),!1),i=e.indexOf(n);return e[i]="",e})},[]);E(["active-speaker-change","track-started","participant-left"],t.useCallback(function(n){n.forEach(function(n){switch(n.action){case"active-speaker-change":if(n.activeSpeaker.peerId===S)return;j(n.activeSpeaker.peerId);break;case"track-started":"audio"===n.track.kind&&n.participant&&!n.participant.local&&j(n.participant.session_id);break;case"participant-left":x(n.participant.session_id)}})},[j,S,x]),200);var M=tn({filter:t.useCallback(function(n){var t;return!!(null===(t=null==n?void 0:n.tracks)||void 0===t?void 0:t.rmpAudio)},[])});return t.createElement("div",{ref:A},b.map(function(n,e){return t.createElement(an,{key:"speaker-slot-".concat(e),onPlayFailed:s,sessionId:n,type:"audio"})}),w.filter(function(n){return!!g||!n.local}).map(function(n){return t.createElement(an,{key:n.screenId,onPlayFailed:s,sessionId:n.session_id,type:"screenAudio"})}),M.map(function(n){return t.createElement(an,{key:"".concat(n,"-rmp"),onPlayFailed:s,sessionId:n,type:"rmpAudio"})}))}));cn.displayName="DailyAudio";var ln=t.forwardRef(function(n,e){var i=n.automirror,r=n.fit,a=void 0===r?"contain":r,c=n.mirror,l=n.onResize,d=n.playableStyle,f=void 0===d?{}:d,s=n.sessionId,v=n.style,p=void 0===v?{}:v,g=n.type,m=void 0===g?"video":g,y=u(n,["automirror","fit","mirror","onResize","playableStyle","sessionId","style","type"]),b=K()===s,h="screenVideo"===m,w=b&&!h,S=t.useRef(null),k=un(S,e),A=on(s,m),j=A.persistentTrack,x=w||h||!A.isOff,M=P(s,"tracks.".concat(m)),I=null==M?void 0:M.subscribed,O=t.useMemo(function(){if("boolean"==typeof c)return c;if(!i)return!1;if(!j)return w;var n=j.getSettings();return"facingMode"in n?w&&"user"===n.facingMode:w},[i,w,c,j]);return t.useEffect(function(){var n=S.current;if(n){var t=function(){var t=n.play();void 0!==t&&t.then(function(){n.controls=!1}).catch(function(t){n.controls=!0,console.warn("Failed to play video",t)})},e=function(){n.paused&&t()},i=function(){n.style.transform="scale(1)"},r=function(){n.style.transform="",setTimeout(function(){n.paused&&t()},100)},o=function(){"hidden"!==document.visibilityState&&n.paused&&t()};return n.addEventListener("canplay",e),n.addEventListener("enterpictureinpicture",i),n.addEventListener("leavepictureinpicture",r),document.addEventListener("visibilitychange",o),function(){n.removeEventListener("canplay",e),n.removeEventListener("enterpictureinpicture",i),n.removeEventListener("leavepictureinpicture",r),document.removeEventListener("visibilitychange",o)}}},[]),t.useEffect(function(){var n=S.current;if(n&&j){if(MediaStream)return n.srcObject=new MediaStream([j]),n.load(),function(){n.srcObject=null,n.load()};console.warn("MediaStream API not available. Can't setup ".concat(m," for ").concat(s))}},[s,m,j,null==j?void 0:j.id]),t.useEffect(function(){var n,t=S.current;if(l&&t)return e(),t.addEventListener("loadedmetadata",e),t.addEventListener("resize",e),function(){n&&cancelAnimationFrame(n),t.removeEventListener("loadedmetadata",e),t.removeEventListener("resize",e)};function e(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){var n=S.current;if(n&&!document.hidden){var t=n.videoWidth,e=n.videoHeight;t&&e&&(null==l||l({aspectRatio:t/e,height:e,width:t}))}})}},[l]),t.createElement("video",o({autoPlay:!0,muted:!0,playsInline:!0,ref:k,"data-local":b,"data-mirrored":O||void 0,"data-playable":x||void 0,"data-session-id":s,"data-subscribed":I,"data-video-type":m,style:o(o({objectFit:a,transform:O?"scale(-1, 1)":""},p),x?f:{})},y))});ln.displayName="DailyVideo";var dn=t.createContext({refreshDevices:function(){return Promise.resolve()}}),fn=e.atom("idle");fn.debugLabel=k("camera-state");var sn=e.atom("idle");sn.debugLabel=k("microphone-state");var vn=e.atom([]);vn.debugLabel=k("camera-devices");var pn=e.atom([]);pn.debugLabel=k("microphone-devices");var gn=e.atom([]);gn.debugLabel=k("speaker-devices");var mn=e.atom(null);mn.debugLabel=k("last-camera-error");var yn=function(e){var i=e.children,r=v(),u=n.useAtomCallback(t.useCallback(function(n,t){return a(void 0,void 0,void 0,function(){var n,e,i,o,u,a,l,d,f,s,v,p;return c(this,function(c){switch(c.label){case 0:if(void 0===(null===(v=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===v?void 0:v.getUserMedia)||void 0===(null===(p=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===p?void 0:p.enumerateDevices))return t(fn,"not-supported"),t(sn,"not-supported"),[2];if(!r)return[2];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,r.enumerateDevices()];case 2:return n=c.sent().devices,e=n.filter(function(n){return"videoinput"===n.kind&&""!==n.deviceId}),i=n.filter(function(n){return"audioinput"===n.kind&&""!==n.deviceId}),o=n.filter(function(n){return"audiooutput"===n.kind&&""!==n.deviceId}),[4,r.getInputDevices()];case 3:return u=c.sent(),a=u.camera,l=u.mic,d=u.speaker,f=function(n,t,e){var i,r;return{device:t,selected:"deviceId"in n&&t.deviceId===n.deviceId,state:null!==(r=null===(i=e.find(function(n){return n.device.deviceId===t.deviceId}))||void 0===i?void 0:i.state)&&void 0!==r?r:"granted"}},s=function(n,t){return"default"===n.device.deviceId?-1:"default"===t.device.deviceId?1:n.device.label<t.device.label?-1:n.device.label>t.device.label?1:0},t(vn,function(n){return e.filter(Boolean).map(function(t){return f(a,t,n)}).sort(s)}),t(pn,function(n){return i.filter(Boolean).map(function(t){return f(l,t,n)}).sort(s)}),t(gn,function(n){return o.filter(Boolean).map(function(t){return f(d,t,n)}).sort(s)}),[3,5];case 4:return c.sent(),t(fn,"not-supported"),t(sn,"not-supported"),[3,5];case 5:return[2]}})})},[r])),l=n.useAtomCallback(t.useCallback(function(n,t){return a(void 0,void 0,void 0,function(){var e,i,a,l,d,f,s,v,p,g,m,y,b,h,w,S,k,A,j,x,M,I,O,R,D,T;return c(this,function(c){switch(c.label){case 0:if(!r)return[2];if(e=n(fn),i=n(sn),!(a=r.participants()).local)return[2];if(l=a.local.tracks,d="prompt",f="prompt",!navigator.permissions)return[3,5];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,navigator.permissions.query({name:"camera"})];case 2:return s=c.sent(),d=s.state,[4,navigator.permissions.query({name:"microphone"})];case 3:return v=c.sent(),f=v.state,[3,5];case 4:return c.sent(),[3,5];case 5:return p="prompt"===d&&["idle","pending"].includes(e)&&"interrupted"===l.video.state&&!l.video.persistentTrack,g=["idle","pending"].includes(e)&&!l.video.persistentTrack&&!!(null===(b=l.video.off)||void 0===b?void 0:b.byUser),m="prompt"===f&&["idle","pending"].includes(i)&&"interrupted"===l.audio.state&&!l.audio.persistentTrack,y=["idle","pending"].includes(i)&&!l.audio.persistentTrack&&!!(null===(h=l.audio.off)||void 0===h?void 0:h.byUser),(null===(S=null===(w=l.audio)||void 0===w?void 0:w.blocked)||void 0===S?void 0:S.byDeviceInUse)?(t(sn,"in-use"),t(pn,function(n){return n.map(function(n){return n.selected?o(o({},n),{state:"in-use"}):n})})):(null===(A=null===(k=l.audio)||void 0===k?void 0:k.blocked)||void 0===A?void 0:A.byDeviceMissing)?t(sn,"not-found"):(null===(x=null===(j=l.audio)||void 0===j?void 0:j.blocked)||void 0===x?void 0:x.byPermissions)||"denied"===f?t(sn,"blocked"):m?t(sn,"pending"):y?t(sn,"idle"):(t(sn,"granted"),t(pn,function(n){return n.map(function(n){return n.selected?o(o({},n),{state:"granted"}):n})})),(null===(I=null===(M=l.video)||void 0===M?void 0:M.blocked)||void 0===I?void 0:I.byDeviceInUse)?(t(fn,"in-use"),t(vn,function(n){return n.map(function(n){return n.selected?o(o({},n),{state:"in-use"}):n})})):(null===(R=null===(O=l.video)||void 0===O?void 0:O.blocked)||void 0===R?void 0:R.byDeviceMissing)?t(fn,"not-found"):(null===(T=null===(D=l.video)||void 0===D?void 0:D.blocked)||void 0===T?void 0:T.byPermissions)||"denied"===d?t(fn,"blocked"):p?t(fn,"pending"):g?t(fn,"idle"):(t(fn,"granted"),t(vn,function(n){return n.map(function(n){return n.selected?o(o({},n),{state:"granted"}):n})})),u(),[2]}})})},[r,u]));return h("participant-updated",t.useCallback(function(n){n.participant.local&&l()},[l])),h("available-devices-updated",u),h("selected-devices-updated",u),h("camera-error",n.useAtomCallback(t.useCallback(function(n,t,e){var i,r,o,u,a,c,l;switch(t(mn,e.error),null===(i=e.error)||void 0===i?void 0:i.type){case"cam-in-use":t(fn,"in-use");break;case"mic-in-use":t(sn,"in-use");break;case"cam-mic-in-use":t(fn,"in-use"),t(sn,"in-use");break;case"not-found":(null===(r=e.error)||void 0===r?void 0:r.missingMedia.includes("video"))&&t(fn,"not-found"),(null===(o=e.error)||void 0===o?void 0:o.missingMedia.includes("audio"))&&t(sn,"not-found");break;case"permissions":(null===(u=e.error)||void 0===u?void 0:u.blockedMedia.includes("video"))&&t(fn,"blocked"),(null===(a=e.error)||void 0===a?void 0:a.blockedMedia.includes("audio"))&&t(sn,"blocked");break;case"constraints":"invalid"===(null===(c=e.error)||void 0===c?void 0:c.reason)?(t(fn,"constraints-invalid"),t(sn,"constraints-invalid")):"none-specified"===(null===(l=e.error)||void 0===l?void 0:l.reason)&&(t(fn,"constraints-none-specified"),t(sn,"constraints-none-specified"));break;case"undefined-mediadevices":t(fn,"undefined-mediadevices"),t(sn,"undefined-mediadevices");break;default:t(fn,"unknown"),t(sn,"unknown")}},[]))),h("started-camera",n.useAtomCallback(t.useCallback(function(n,t){t(fn,"granted"),t(sn,"granted"),l()},[l]))),t.createElement(dn.Provider,{value:{refreshDevices:u}},i)},bn=e.atom({errorMsg:void 0,isLiveStreaming:!1,layout:void 0});bn.debugLabel=k("live-streaming");var hn=function(e){var i=e.children;return h("live-streaming-started",n.useAtomCallback(t.useCallback(function(n,t,e){t(bn,{isLiveStreaming:!0,layout:null==e?void 0:e.layout})},[]))),h("live-streaming-stopped",n.useAtomCallback(t.useCallback(function(n,t){t(bn,function(n){return o(o({},n),{isLiveStreaming:!1,layout:void 0})})},[]))),h("live-streaming-error",n.useAtomCallback(t.useCallback(function(n,t,e){t(bn,function(n){return o(o({},n),{errorMsg:e.errorMsg})})},[]))),h("left-meeting",n.useAtomCallback(t.useCallback(function(n,t){t(bn,{errorMsg:void 0,isLiveStreaming:!1,layout:void 0})},[]))),t.createElement(t.Fragment,null,i)},wn=e.atom("new");wn.debugLabel=k("meeting-state");var Sn=e.atom(null);Sn.debugLabel=k("meeting-error");var kn=e.atom(null);kn.debugLabel=k("non-fatal-error");var An=e.atom({data:void 0,topology:"none"});An.debugLabel=k("meeting-session-data");var jn=function(e){var i=e.children,r=v(),o=n.useAtomCallback(t.useCallback(function(n,t){if(r){var e=r.meetingState();return t(wn,e),e}},[r]));h("loading",o),h("loaded",o),h("joining-meeting",o),h("joined-meeting",o),h("left-meeting",o),h("error",n.useAtomCallback(t.useCallback(function(n,t,e){t(Sn,e),o()},[o]))),h("nonfatal-error",n.useAtomCallback(t.useCallback(function(n,t,e){t(kn,e)},[])));var u=n.useAtomCallback(t.useCallback(function(n,t){r&&t(An,r.meetingSessionState())},[r]));return h("joined-meeting",u),h("meeting-session-state-updated",n.useAtomCallback(t.useCallback(function(n,t,e){t(An,e.meetingSessionState)},[]))),h("left-meeting",n.useAtomCallback(t.useCallback(function(n,t){t(An,{data:void 0,topology:"none"})},[]))),h("call-instance-destroyed",n.useAtomCallback(t.useCallback(function(n,t){t(wn,"new"),t(Sn,null),t(kn,null),t(An,{data:void 0,topology:"none"})},[]))),t.createElement(t.Fragment,null,i)},xn=e.atom("none");xn.debugLabel=k("topology");var Mn=e.atom("unknown"),In=e.atom([]),On=e.atom(100);On.debugLabel=k("network-quality");var Rn=e.atom("good");Rn.debugLabel=k("network-threshold");var Dn=function(i){var r=i.children,o=v(),u=e.useAtomValue(xn),l=n.useAtomCallback(t.useCallback(function(n,t){return a(void 0,void 0,void 0,function(){var n;return c(this,function(e){switch(e.label){case 0:return o?[4,o.getNetworkTopology()]:[2];case 1:return(n=e.sent())&&"none"!==(null==n?void 0:n.topology)?(t(xn,n.topology),[2]):[2]}})})},[o]));return h("joined-meeting",l),h("network-connection",n.useAtomCallback(t.useCallback(function(n,t,e){"connected"===e.event&&("peer-to-peer"===e.type&&t(xn,"peer"),"sfu"===e.type&&t(xn,"sfu"))},[]))),h("network-quality-change",n.useAtomCallback(t.useCallback(function(n,t,e){t(Mn,function(n){return n!==e.networkState?e.networkState:n}),t(In,function(n){var t,i=null!==(t=e.networkStateReasons)&&void 0!==t?t:[];return S(n,i)?n:i}),t(On,function(n){return n!==e.quality?e.quality:n}),t(Rn,function(n){return n!==e.threshold?e.threshold:n})},[]))),h("left-meeting",n.useAtomCallback(t.useCallback(function(n,t){t(xn,"none"),t(Mn,"unknown"),t(In,[]),t(On,100),t(Rn,"good")},[]))),t.useEffect(function(){o&&"none"===u&&l()},[o,l,u]),t.createElement(t.Fragment,null,r)},Tn=e.atom({isLocalParticipantRecorded:!1,isRecording:!1});Tn.debugLabel=k("recording-state");var Pn=function(e){var i=e.children,r=K(),u=tn({filter:"record"}),a=n.useAtomCallback(t.useCallback(function(n,t,e,i){var r=n(Tn),u={isLocalParticipantRecorded:r.isLocalParticipantRecorded,isRecording:r.isRecording,local:r.local,type:r.type},a={isLocalParticipantRecorded:"local"!==(null==u?void 0:u.type)&&(null==u?void 0:u.type)?u.isLocalParticipantRecorded:e,isRecording:"local"!==(null==u?void 0:u.type)&&(null==u?void 0:u.type)?u.isRecording:e,local:"local"!==(null==u?void 0:u.type)&&(null==u?void 0:u.type)||!e?null==u?void 0:u.local:i,type:e?"local":null==r?void 0:r.type};w(u,a)||t(Tn,o(o({},u),a))},[]));return t.useEffect(function(){var n=u.length>0,t=u.includes(r||"local");a(n,t)},[r,a,u]),h("recording-started",n.useAtomCallback(t.useCallback(function(n,t,e){var i,o=!0;switch(e.type){case"cloud-beta":case"cloud":r&&"single-participant"===(null===(i=e.layout)||void 0===i?void 0:i.preset)&&e.layout.session_id!==r&&(o=!1)}t(Tn,{error:!1,isLocalParticipantRecorded:o,isRecording:!0,layout:null==e?void 0:e.layout,local:null==e?void 0:e.local,recordingId:null==e?void 0:e.recordingId,recordingStartedDate:new Date,startedBy:null==e?void 0:e.startedBy,type:null==e?void 0:e.type})},[r]))),h("recording-stopped",n.useAtomCallback(t.useCallback(function(n,t){t(Tn,function(n){return o(o({},n),{isLocalParticipantRecorded:!1,isRecording:!1})})},[]))),h("recording-error",n.useAtomCallback(t.useCallback(function(n,t){t(Tn,function(n){return o(o({},n),{error:!0,isLocalParticipantRecorded:!1,isRecording:!1})})},[]))),h("left-meeting",n.useAtomCallback(t.useCallback(function(n,t){t(Tn,{isLocalParticipantRecorded:!1,isRecording:!1})},[]))),t.createElement(t.Fragment,null,i)},Fn=function(){var n=e.useAtomValue(wn);return t.useDebugValue(n),n},Ln=e.atom(null);Ln.debugLabel=k("room-state");var qn=function(e){var i=e.children,r=v(),o=Fn(),u=n.useAtomCallback(t.useCallback(function(n,t){return a(void 0,void 0,void 0,function(){var n;return c(this,function(e){switch(e.label){case 0:return r&&"left-meeting"!==o?[4,r.room()]:[2];case 1:return(n=e.sent())&&"id"in n&&t(Ln,n),[2,n]}})})},[r,o]));return h("access-state-updated",u),h("left-meeting",n.useAtomCallback(t.useCallback(function(n,t){return function(){t(Ln,null)}},[]))),t.createElement(t.Fragment,null,i)},En=e.atom({isTranscribing:!1,model:"general",language:"en",transcriptions:[]});En.debugLabel=k("transcription-state");var Cn,Bn,Vn=function(e){var i=e.children;return h("transcription-started",n.useAtomCallback(t.useCallback(function(n,t,e){t(En,{error:!1,transcriptionStartDate:new Date,isTranscribing:!0,transcriptions:[],endpointing:e.endpointing,extra:e.extra,includeRawResponse:e.includeRawResponse,instanceId:e.instanceId,language:e.language,model:e.model,profanity_filter:e.profanity_filter,punctuate:e.punctuate,redact:e.redact,startedBy:e.startedBy,tier:e.tier})},[]))),h("transcription-stopped",n.useAtomCallback(t.useCallback(function(n,t,e){t(En,function(n){return o(o({},n),{updatedBy:e.updatedBy,isTranscribing:!1})})},[]))),h("transcription-error",n.useAtomCallback(t.useCallback(function(n,t){t(En,function(n){return o(o({},n),{error:!0,isTranscribing:!1})})},[]))),h("left-meeting",n.useAtomCallback(t.useCallback(function(n,t){t(En,function(n){return o(o({},n),{isTranscribing:!1})})},[]))),h("app-message",n.useAtomCallback(t.useCallback(function(n,t,e){"transcription"===(null==e?void 0:e.fromId)&&t(En,function(n){return o(o({},n),{isTranscribing:!0,transcriptions:f(f([],d(n.transcriptions),!1),[e.data],!1)})})},[]))),t.createElement(t.Fragment,null,i)},_n={},Wn=function(){return!0},Nn={options:_n,shouldCreateInstance:Wn},zn=function(n,e){var r=void 0===e?Nn:e,u=r.parentElRef,l=r.options,f=void 0===l?_n:l,s=r.shouldCreateInstance,v=void 0===s?Wn:s,p=d(t.useState(null),2),g=p[0],m=p[1],y=t.useRef();return t.useEffect(function(){if(("callFrame"!==n||null!==(null==u?void 0:u.current))&&v()){var t=function(){setTimeout(function(){return m(null)},0)},e=i.getCallInstance();if(!g&&e&&!e.isDestroyed())return e.once("call-instance-destroyed",t),void m(e);if(g)w(y.current,f)||function(n){a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,n.destroy()];case 1:return t.sent(),[2]}})})}(g);else{if(!e||e.isDestroyed()){switch(n){case"callFrame":e=(null==u?void 0:u.current)?i.createFrame(u.current,o({},f)):i.createFrame(o({},f));break;case"callObject":e=i.createCallObject(o({},f))}y.current=f}m(e),e.once("call-instance-destroyed",t)}}},[g,f,u,v,n]),g},$n=function(n){return zn("callObject",n)},Gn=function(n,i){var r=void 0===i?{}:i,o=r.onParticipantLeft,u=r.onParticipantUpdated,a=e.useAtomValue($(n));return E(["participant-updated","participant-left"],t.useCallback(function(t){var e=t.filter(function(t){return t.participant.session_id===n});e.length&&e.forEach(function(n){switch(n.action){case"participant-updated":null==u||u(n);break;case"participant-left":null==o||o(n)}})},[o,u,n])),t.useDebugValue(a),a},Un="data:application/javascript;charset=utf8,".concat(encodeURIComponent("\n    class AudioLevelProcessor extends AudioWorkletProcessor {\n    volume;\n    interval;\n    nextFrame;\n    \n    constructor() {\n      super();\n      this.volume = 0;\n      this.interval = 25;\n      this.nextFrame = this.interval;\n    }\n    \n    get intervalInFrames() {\n      // sampleRate is globally defined in AudioWorklets.\n      // See https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletGlobalScope\n      // eslint-disable-next-line no-undef\n      return (this.interval / 1000) * sampleRate;\n    }\n    \n    process(inputList) {\n      const firstInput = inputList[0];\n    \n      if (firstInput.length > 0) {\n        const inputData = firstInput[0];\n        let total = 0;\n    \n        for (let i = 0; i < inputData.length; ++i) {\n          total += Math.abs(inputData[i]);\n        }\n    \n        const rms = Math.sqrt(total / inputData.length);\n        this.volume = Math.max(0, Math.min(1, rms));\n    \n        this.nextFrame -= inputData.length;\n        if (this.nextFrame < 0) {\n          this.nextFrame += this.intervalInFrames;\n          this.port.postMessage({ volume: this.volume });\n        }\n      }\n    \n      return true;\n    }\n    }\n    \n    registerProcessor('audiolevel', AudioLevelProcessor);              \n")),Hn=L(Bn?Cn:(Bn=1,Cn=function n(t,e){if(t===e)return!0;if(t&&e&&"object"==r(t)&&"object"==r(e)){if(t.constructor!==e.constructor)return!1;var i,o,u;if(Array.isArray(t)){if((i=t.length)!=e.length)return!1;for(o=i;0!==o--;)if(!n(t[o],e[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if((i=(u=Object.keys(t)).length)!==Object.keys(e).length)return!1;for(o=i;0!==o--;)if(!Object.prototype.hasOwnProperty.call(e,u[o]))return!1;for(o=i;0!==o--;){var a=u[o];if(!n(t[a],e[a]))return!1}return!0}return t!=t&&e!=e})),Jn=e.atom({state:"low",reason:"none"});Jn.debugLabel=k("cpu-load");var Kn=function(){var n={meetingError:e.useAtomValue(Sn),nonFatalError:e.useAtomValue(kn)};return t.useDebugValue(n),n},Qn=e.atom(null);Qn.debugLabel=k("input-settings");var Xn=e.atom({hidden:0,present:0});Xn.debugLabel=k("participant-counts");var Yn=n.atomFamily(function(n){var t=e.atom({},function(t,e,i){e(Yn(n),i)});return t.debugLabel=k("participant-receive-settings-".concat(n)),t}),Zn=function(){var n=e.useAtomValue(Ln);return t.useDebugValue(n),n},nt=e.atom(null);nt.debugLabel=k("send-settings"),exports.DailyAudio=cn,exports.DailyAudioTrack=an,exports.DailyProvider=function(n){var i=n.children,r=n.jotaiStore,o=u(n,["children","jotaiStore"]),a=t.useRef({}),c=t.useCallback(function(n){var t,e,i,r;if("action"in n){var o=n.action,u=Array.from(null!==(r=null===(i=a.current)||void 0===i?void 0:i[o])&&void 0!==r?r:[]),c=u.filter(function(n){return d(n,1)[0]<0}),s=u.filter(function(n){return d(n,1)[0]>0}),v=f(f([],d(c),!1),d(s),!1);try{for(var p=l(v),g=p.next();!g.done;g=p.next())(0,d(g.value,2)[1])(n)}catch(n){t={error:n}}finally{try{g&&!g.done&&(e=p.return)&&e.call(p)}finally{if(t)throw t.error}}}},[]),v=t.useCallback(function(n){n&&Object.keys(a.current).forEach(function(t){n.off(t,c),n.isDestroyed()||n.on(t,c)})},[c]),g="callObject"in o?o.callObject:null,m=t.useMemo(function(){return"callObject"in o?{}:o},[o]),y=$n({options:m,shouldCreateInstance:t.useCallback(function(){return!("callObject"in o)},[o])}),b=null!=g?g:y;t.useEffect(function(){b&&v(b)},[b,v]);var h=t.useCallback(function(n,t,e){var i,r;a.current[n]||(a.current[n]=new Map,b&&(b.off(n,c),b.isDestroyed()||b.on(n,c))),(null===(i=a.current[n])||void 0===i?void 0:i.has(e))||null===(r=a.current[n])||void 0===r||r.set(e,t)},[b,c]),w=t.useCallback(function(n,t){var e,i;null===(e=a.current[n])||void 0===e||e.delete(t),0===(null===(i=a.current[n])||void 0===i?void 0:i.size)&&(null==b||b.off(n,c),delete a.current[n])},[b,c]);return t.createElement(e.Provider,{store:r},t.createElement(s.Provider,{value:b},t.createElement(p.Provider,{value:{on:h,off:w}},t.createElement(qn,null,t.createElement(jn,null,t.createElement(Dn,null,t.createElement(J,null,t.createElement(Pn,null,t.createElement(hn,null,t.createElement(Vn,null,t.createElement(yn,null,i)))))))))))},exports.DailyVideo=ln,exports.useActiveParticipant=function(n){var i=void 0===n?{}:n,r=i.ignoreLocal,o=void 0!==r&&r,u=i.onActiveSpeakerChange,a=v(),c=e.useAtomValue(_),l=d(t.useState(""),2),f=l[0],s=l[1],p=Gn(f);return t.useEffect(function(){var n;if(a){var t=null===(n=null==a?void 0:a.participants())||void 0===n?void 0:n.local;o&&c===(null==t?void 0:t.session_id)||s(null!=c?c:"")}},[a,o,c]),h("active-speaker-change",t.useCallback(function(n){null==u||u(n)},[u])),t.useDebugValue(p),p},exports.useActiveSpeakerId=X,exports.useAppMessage=function(n){var e=(void 0===n?{}:n).onAppMessage,i=v(),r=t.useCallback(function(n,t){void 0===t&&(t="*"),i&&i.sendAppMessage(n,t)},[i]),o=t.useCallback(function(n){null==e||e(n,r)},[e,r]);return h("app-message",o),r},exports.useAudioLevel=function(n,e){var i=t.useRef();t.useEffect(function(){if(n){var t="undefined"!=typeof AudioContext?AudioContext:void 0!==window.webkitAudioContext?window.webkitAudioContext:null;if(t){i.current||(i.current=new t);var r=i.current;if(r&&MediaStream){var o,u,l=r.createMediaStreamSource(new MediaStream([n]));return a(this,void 0,void 0,function(){var n;return c(this,function(t){switch(t.label){case 0:return t.trys.push([0,1,,6]),o=new AudioWorkletNode(r,"audiolevel"),u=r.createGain(),[3,6];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,r.audioWorklet.addModule(Un)];case 3:return t.sent(),o=new AudioWorkletNode(r,"audiolevel"),u=r.createGain(),[3,5];case 4:return n=t.sent(),console.error(n),[3,5];case 5:return[3,6];case 6:if(!o||!u)return[2];o.port.onmessage=function(n){var t=0;n.data.volume&&(t=n.data.volume),o&&e(t)},u.gain.value=0;try{l.connect(o).connect(u).connect(r.destination)}catch(n){console.warn(n)}return[2]}})}),function(){null==o||o.disconnect(),o=null,null==l||l.disconnect()}}}}},[e,n])},exports.useAudioLevelObserver=function(n,e,i,r){var o=v(),u=K(),a=n===u;h("local-audio-level",t.useCallback(function(n){a&&e(n.audioLevel)},[e,a])),h("remote-participants-audio-level",t.useCallback(function(t){a||e(t.participantsAudioLevel[n])},[e,n,a])),t.useEffect(function(){if(o&&!o.isDestroyed()&&a&&!o.isLocalAudioLevelObserverRunning())try{o.startLocalAudioLevelObserver(r)}catch(n){null==i||i("Local audio level observer not supported in this browser")}},[o,i,r,a]),t.useEffect(function(){!o||o.isDestroyed()||a||o.isRemoteParticipantsAudioLevelObserverRunning()||o.startRemoteParticipantsAudioLevelObserver(r)},[o,r,a])},exports.useAudioTrack=function(n){return on(n,"audio")},exports.useCPULoad=function(i){var r=(void 0===i?{}:i).onCPULoadChange,o=e.useAtomValue(Jn),u=v(),a=Fn(),c=n.useAtomCallback(t.useCallback(function(n,t,e){var i=n(Jn);Hn(i,e)||t(Jn,e)},[]));return t.useEffect(function(){var n=!0;if(u&&!u.isDestroyed()&&"joined-meeting"===a)return u.getCpuLoadStats().then(function(t){n&&c({state:t.cpuLoadState,reason:t.cpuLoadStateReason})}),function(){n=!1}},[u,a,c]),h("cpu-load-change",t.useCallback(function(n){c({state:n.cpuLoadState,reason:n.cpuLoadStateReason}),null==r||r(n)},[r,c])),t.useDebugValue(o),o},exports.useCallFrame=function(n){return zn("callFrame",n)},exports.useCallObject=$n,exports.useDaily=v,exports.useDailyError=Kn,exports.useDailyEvent=h,exports.useDevices=function(){var n=v(),i=e.useAtomValue(fn),r=e.useAtomValue(sn),o=e.useAtomValue(vn),u=e.useAtomValue(pn),l=e.useAtomValue(gn),d=e.useAtomValue(mn),f=t.useContext(dn).refreshDevices,s=t.useCallback(function(t){return a(void 0,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,null==n?void 0:n.setInputDevicesAsync({audioDeviceId:null,videoDeviceId:t})];case 1:return e.sent(),[2]}})})},[n]),p=t.useCallback(function(t){return a(void 0,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,null==n?void 0:n.setInputDevicesAsync({audioDeviceId:t,videoDeviceId:null})];case 1:return e.sent(),[2]}})})},[n]),g=t.useCallback(function(t){return a(void 0,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,null==n?void 0:n.setOutputDeviceAsync({outputDeviceId:t})];case 1:return e.sent(),[2]}})})},[n]),m=["blocked","in-use","not-found","constraints-invalid","constraints-none-specified","undefined-mediadevices","unknown"],y={cameraError:d,cameras:o,camState:i,currentCam:o.find(function(n){return n.selected}),currentMic:u.find(function(n){return n.selected}),currentSpeaker:l.find(function(n){return n.selected}),hasCamError:m.includes(i),hasMicError:m.includes(r),microphones:u,micState:r,refreshDevices:f,setCamera:s,setMicrophone:p,setSpeaker:g,speakers:l};return t.useDebugValue(y),y},exports.useInputSettings=function(i){var r=void 0===i?{}:i,o=r.onError,u=r.onInputSettingsUpdated,a=e.useAtomValue(Qn),c=Kn().nonFatalError,l=v(),s=n.useAtomCallback(t.useCallback(function(n,t,e){t(Qn,e)},[]));t.useEffect(function(){l&&l.getInputSettings().then(s)},[l,s]),h("input-settings-updated",t.useCallback(function(n){s(n.inputSettings),null==u||u(n)},[u,s])),h("nonfatal-error",t.useCallback(function(n){"input-settings-error"===n.type&&(null==o||o(n))},[o]));var p=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return null==l?void 0:l.updateInputSettings.apply(l,f([],d(n),!1))},[l]),g={errorMsg:"input-settings-error"===(null==c?void 0:c.type)?c.errorMsg:null,inputSettings:a,updateInputSettings:p};return t.useDebugValue(g),g},exports.useLiveStreaming=function(n){var i=void 0===n?{}:n,r=i.onLiveStreamingError,u=i.onLiveStreamingStarted,a=i.onLiveStreamingStopped,c=i.onLiveStreamingUpdated,l=i.onLiveStreamingWarning,s=v(),p=e.useAtomValue(bn);h("live-streaming-started",t.useCallback(function(n){null==u||u(n)},[u])),h("live-streaming-stopped",t.useCallback(function(n){null==a||a(n)},[a])),h("live-streaming-updated",t.useCallback(function(n){null==c||c(n)},[c])),h("live-streaming-error",t.useCallback(function(n){null==r||r(n)},[r])),h("nonfatal-error",t.useCallback(function(n){"live-streaming-warning"===n.type&&(null==l||l(n))},[l]));var g=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];s&&s.startLiveStreaming.apply(s,f([],d(n),!1))},[s]),m=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];s&&s.stopLiveStreaming.apply(s,f([],d(n),!1))},[s]),y=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];s&&s.updateLiveStreaming.apply(s,f([],d(n),!1))},[s]),b=o(o({},p),{startLiveStreaming:g,stopLiveStreaming:m,updateLiveStreaming:y});return t.useDebugValue(b),b},exports.useLocalParticipant=function(){var n=e.useAtomValue(W),i=Gn(n);return t.useDebugValue(i),i},exports.useLocalSessionId=K,exports.useMediaTrack=on,exports.useMeetingSessionState=function(n){var i=(void 0===n?{}:n).onError,r=e.useAtomValue(An);h("nonfatal-error",t.useCallback(function(n){"meeting-session-data-error"===n.type&&(null==i||i(n))},[i]));var o={data:null==r?void 0:r.data,topology:null==r?void 0:r.topology};return t.useDebugValue(o),o},exports.useMeetingState=Fn,exports.useNetwork=function(n){var i=void 0===n?{}:n,r=i.onNetworkConnection,o=i.onNetworkQualityChange,u=v(),l=e.useAtomValue(xn),d=e.useAtomValue(Mn),f=e.useAtomValue(In),s=e.useAtomValue(On),p=e.useAtomValue(Rn);h("network-connection",t.useCallback(function(n){null==r||r(n)},[r])),h("network-quality-change",t.useCallback(function(n){null==o||o(n)},[o]));var g=t.useCallback(function(){return a(void 0,void 0,void 0,function(){var n;return c(this,function(t){switch(t.label){case 0:return[4,null==u?void 0:u.getNetworkStats()];case 1:return[2,null==(n=t.sent())?void 0:n.stats]}})})},[u]),m={getStats:g,networkState:d,networkStateReasons:f,quality:s,threshold:p,topology:l};return t.useDebugValue(m),m},exports.useParticipant=Gn,exports.useParticipantCounts=function(i){var r=(void 0===i?{}:i).onParticipantCountsUpdated,o=v(),u=e.useAtomValue(Xn),a=n.useAtomCallback(t.useCallback(function(n,t,e){t(Xn,e)},[]));return h("participant-counts-updated",t.useCallback(function(n){a(n.participantCounts),null==r||r(n)},[r,a])),t.useEffect(function(){o&&!o.isDestroyed()&&a(o.participantCounts())},[o,a]),t.useDebugValue(u),u},exports.useParticipantIds=tn,exports.useParticipantProperty=P,exports.usePermissions=function(n){var e,i,r,o,u,a,c,l,d,f=K(),s=P(null!=n?n:f,"permissions"),v="boolean"==typeof(null==s?void 0:s.canSend)?null==s?void 0:s.canSend:!!(null===(e=null==s?void 0:s.canSend)||void 0===e?void 0:e.has("audio")),p="boolean"==typeof(null==s?void 0:s.canSend)?null==s?void 0:s.canSend:!!(null===(i=null==s?void 0:s.canSend)||void 0===i?void 0:i.has("video")),g="boolean"==typeof(null==s?void 0:s.canSend)?null==s?void 0:s.canSend:!!(null===(r=null==s?void 0:s.canSend)||void 0===r?void 0:r.has("customAudio")),m="boolean"==typeof(null==s?void 0:s.canSend)?null==s?void 0:s.canSend:!!(null===(o=null==s?void 0:s.canSend)||void 0===o?void 0:o.has("customVideo")),y="boolean"==typeof(null==s?void 0:s.canSend)?null==s?void 0:s.canSend:!!(null===(u=null==s?void 0:s.canSend)||void 0===u?void 0:u.has("screenAudio")),b="boolean"==typeof(null==s?void 0:s.canSend)?null==s?void 0:s.canSend:!!(null===(a=null==s?void 0:s.canSend)||void 0===a?void 0:a.has("screenVideo")),h={canAdminParticipants:"boolean"==typeof(null==s?void 0:s.canAdmin)?null==s?void 0:s.canAdmin:!!(null===(c=null==s?void 0:s.canAdmin)||void 0===c?void 0:c.has("participants")),canAdminStreaming:"boolean"==typeof(null==s?void 0:s.canAdmin)?null==s?void 0:s.canAdmin:!!(null===(l=null==s?void 0:s.canAdmin)||void 0===l?void 0:l.has("streaming")),canAdminTranscription:"boolean"==typeof(null==s?void 0:s.canAdmin)?null==s?void 0:s.canAdmin:!!(null===(d=null==s?void 0:s.canAdmin)||void 0===d?void 0:d.has("transcription")),canSendAudio:v,canSendCustomAudio:g,canSendCustomVideo:m,canSendScreenAudio:y,canSendScreenVideo:b,canSendVideo:p,hasPresence:null==s?void 0:s.hasPresence,permissions:s};return t.useDebugValue(h),h},exports.useReceiveSettings=function(i){var r=void 0===i?{}:i,o=r.id,a=void 0===o?"base":o,c=r.onReceiveSettingsUpdated,s=d(e.useAtom(Yn("base")),1)[0],p=d(e.useAtom(Yn(a)),1)[0],g=v(),m=Fn(),y=n.useAtomCallback(t.useCallback(function(n,t,e){var i,r,o=u(e,[]);try{for(var c=l(Object.entries(o)),f=c.next();!f.done;f=c.next()){var s=d(f.value,2),v=s[0],p=s[1];t(Yn(v),p)}}catch(n){i={error:n}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}a in o||Yn.remove(a)},[a]));h("receive-settings-updated",t.useCallback(function(n){y(n.receiveSettings),null==c||c(n)},[c,y])),t.useEffect(function(){g&&!g.isDestroyed()&&g.getReceiveSettings().then(y)},[g,y]);var b=t.useCallback(function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];g&&"joined-meeting"===m&&(null===(n=null==g?void 0:g.updateReceiveSettings)||void 0===n||n.call.apply(n,f([g],d(t),!1)))},[g,m]),w={receiveSettings:"base"===a||0===Object.keys(p).length?s:p,updateReceiveSettings:b};return t.useDebugValue(w),w},exports.useRecording=function(n){var i=void 0===n?{}:n,r=i.onRecordingData,u=i.onRecordingError,a=i.onRecordingStarted,c=i.onRecordingStopped,l=v(),s=e.useAtomValue(Tn);h("recording-started",t.useCallback(function(n){null==a||a(n)},[a])),h("recording-stopped",t.useCallback(function(n){null==c||c(n)},[c])),h("recording-error",t.useCallback(function(n){null==u||u(n)},[u])),h("recording-data",t.useCallback(function(n){null==r||r(n)},[r]));var p=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];l&&l.startRecording.apply(l,f([],d(n),!1))},[l]),g=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];l&&l.stopRecording.apply(l,f([],d(n),!1))},[l]),m=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];l&&l.updateRecording.apply(l,f([],d(n),!1))},[l]),y=o(o({},s),{startRecording:p,stopRecording:g,updateRecording:m});return t.useDebugValue(y),y},exports.useRoom=Zn,exports.useRoomExp=function(n){var i,r,o,u,a,c,l=(void 0===n?{}:n).onCountdown,s=e.useAtomValue(N),v=Zn(),p=d(t.useState(null),2),g=p[0],m=p[1];t.useEffect(function(){var n,t,e,i,r,o,u,a,c=[],l=null!==(i=null!==(t=null===(n=null==v?void 0:v.tokenConfig)||void 0===n?void 0:n.eject_after_elapsed)&&void 0!==t?t:null===(e=null==v?void 0:v.config)||void 0===e?void 0:e.eject_after_elapsed)&&void 0!==i?i:0;l&&s&&c.push(s.getTime()+1e3*l),(null===(r=null==v?void 0:v.tokenConfig)||void 0===r?void 0:r.exp)&&(null===(o=null==v?void 0:v.tokenConfig)||void 0===o?void 0:o.eject_at_token_exp)&&c.push(1e3*v.tokenConfig.exp),(null===(u=null==v?void 0:v.config)||void 0===u?void 0:u.exp)&&(null===(a=null==v?void 0:v.config)||void 0===a?void 0:a.eject_at_room_exp)&&c.push(1e3*v.config.exp);var p=c.length>0?new Date(Math.min.apply(Math,f([],d(c),!1))):new Date(0);0!==p.getTime()&&m(function(n){return(null==n?void 0:n.getTime())!==p.getTime()?p:n})},[s,null===(i=null==v?void 0:v.config)||void 0===i?void 0:i.eject_after_elapsed,null===(r=null==v?void 0:v.config)||void 0===r?void 0:r.eject_at_room_exp,null===(o=null==v?void 0:v.config)||void 0===o?void 0:o.exp,null===(u=null==v?void 0:v.tokenConfig)||void 0===u?void 0:u.eject_after_elapsed,null===(a=null==v?void 0:v.tokenConfig)||void 0===a?void 0:a.eject_at_token_exp,null===(c=null==v?void 0:v.tokenConfig)||void 0===c?void 0:c.exp]),t.useEffect(function(){if(g&&0!==g.getTime()){var n=setInterval(function(){var n,t=(null!==(n=null==g?void 0:g.getTime())&&void 0!==n?n:0)/1e3-Date.now()/1e3;t<0||null==l||l({hours:Math.max(0,Math.floor(t/3600)),minutes:Math.max(0,Math.floor(t%3600/60)),seconds:Math.max(0,Math.floor(t%60))})},1e3);return function(){clearInterval(n)}}},[g,l]);var y={ejectDate:g};return t.useDebugValue(y),y},exports.useScreenAudioTrack=function(n){return on(n,"screenAudio")},exports.useScreenShare=rn,exports.useScreenVideoTrack=function(n){return on(n,"screenVideo")},exports.useSendSettings=function(n){var i=(void 0===n?{}:n).onSendSettingsUpdated,r=v(),o=d(e.useAtom(nt),2),u=o[0],l=o[1];h("send-settings-updated",t.useCallback(function(n){l(n.sendSettings),null==i||i(n)},[i,l]));var s=t.useCallback(function(n){l(n)},[l]);t.useEffect(function(){r&&!r.isDestroyed()&&s(r.getSendSettings())},[r,s]);var p=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return a(void 0,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,null==r?void 0:r.updateSendSettings.apply(r,f([],d(n),!1))];case 1:return(t=e.sent())?(s(t),[2,t]):[2]}})})},[r,s]),g={sendSettings:u,updateSendSettings:p};return t.useDebugValue(g),g},exports.useThrottledDailyEvent=E,exports.useTranscription=function(n){var i=void 0===n?{}:n,r=i.onTranscriptionAppData,u=i.onTranscriptionError,a=i.onTranscriptionMessage,c=i.onTranscriptionStarted,l=i.onTranscriptionStopped,s=v(),p=e.useAtomValue(En);h("transcription-started",t.useCallback(function(n){null==c||c(n)},[c])),h("transcription-stopped",t.useCallback(function(n){null==l||l(n)},[l])),h("transcription-error",t.useCallback(function(n){null==u||u(n)},[u])),h("transcription-message",t.useCallback(function(n){null==a||a(n)},[a])),h("app-message",t.useCallback(function(n){"transcription"===(null==n?void 0:n.fromId)&&(null==r||r(n))},[r]));var g=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];s&&s.startTranscription.apply(s,f([],d(n),!1))},[s]),m=t.useCallback(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];s&&s.stopTranscription.apply(s,f([],d(n),!1))},[s]),y=o(o({},p),{startTranscription:g,stopTranscription:m});return t.useDebugValue(y),y},exports.useVideoTrack=function(n){return on(n,"video")},exports.useWaitingParticipants=function(n){var i=void 0===n?{}:n,r=i.onWaitingParticipantAdded,o=i.onWaitingParticipantRemoved,u=i.onWaitingParticipantUpdated,a=v(),c=e.useAtomValue(H(void 0));h("waiting-participant-added",t.useCallback(function(n){null==r||r(n)},[r])),h("waiting-participant-removed",t.useCallback(function(n){null==o||o(n)},[o])),h("waiting-participant-updated",t.useCallback(function(n){null==u||u(n)},[u]));var l=t.useCallback(function(n,t){"*"!==n?null==a||a.updateWaitingParticipant(n,{grantRequestedAccess:t}):null==a||a.updateWaitingParticipants({"*":{grantRequestedAccess:t}})},[a]),d={waitingParticipants:c,grantAccess:t.useCallback(function(n){l(n,!0)},[l]),denyAccess:t.useCallback(function(n){l(n,!1)},[l])};return t.useDebugValue(d),d};
//# sourceMappingURL=index.js.map
